# üè† Sistema de Control de Gastos del Hogar

Un sistema completo y portable para el registro y control de ingresos y gastos dom√©sticos, desarrollado con Node.js, Express, React y soporte para SQLite y PostgreSQL.

## üìã Caracter√≠sticas

### üéØ Funcionalidades Principales
- ‚úÖ **Gesti√≥n de Transacciones**: Registro completo de ingresos y gastos
- üìä **Categorizaci√≥n Inteligente**: Sistema de categor√≠as personalizables con iconos
- üìà **An√°lisis Visual**: Gr√°ficos interactivos con Chart.js
- üîç **Filtros Avanzados**: B√∫squeda por fecha, categor√≠a, tipo y texto
- üì± **Dise√±o Responsivo**: Interfaz adaptable a dispositivos m√≥viles
- üíæ **Base de Datos Dual**: Soporte para SQLite (portable) y PostgreSQL (producci√≥n)

### üõ°Ô∏è Caracter√≠sticas T√©cnicas
- üîí **Seguridad**: Helmet, rate limiting, validaci√≥n con Joi
- üöÄ **Performance**: Compresi√≥n, √≠ndices de base de datos, paginaci√≥n
- üìù **Logging**: Sistema completo de logs con Morgan
- üîÑ **Migraciones**: Sistema autom√°tico de migraciones de base de datos
- üå± **Seeders**: Datos de ejemplo y categor√≠as por defecto
- ‚ö° **API RESTful**: Endpoints completos y documentados

## üöÄ Instalaci√≥n R√°pida

### Prerrequisitos
- Node.js >= 16.0.0
- npm >= 8.0.0

### 1. Clonar e Instalar
```bash
# Instalar todas las dependencias
npm run install-all
```

### 2. Configurar Variables de Entorno
```bash
# Copiar archivo de configuraci√≥n
cp server/.env.example server/.env

# Editar configuraci√≥n (opcional para SQLite)
# Para PostgreSQL, configurar las variables correspondientes
```

### 3. Inicializar Base de Datos
```bash
# Ejecutar migraciones y seeders
cd server
npm run setup
```

### 4. Ejecutar en Desarrollo
```bash
# Desde la ra√≠z del proyecto
npm run dev
```

La aplicaci√≥n estar√° disponible en:
- **Frontend**: http://localhost:3000
- **Backend API**: http://localhost:5000
- **Health Check**: http://localhost:5000/api/health

## üìÅ Estructura del Proyecto

```
summary-of-expenses/
‚îú‚îÄ‚îÄ üìÅ client/                    # Frontend React
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ public/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.html
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ manifest.json
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ components/        # Componentes React
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TransactionForm.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TransactionList.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Summary.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Charts.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ App.js               # Componente principal
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.js            # Punto de entrada
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.css           # Estilos globales
‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ üìÅ server/                   # Backend Node.js/Express
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ config/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ database.js         # Configuraci√≥n de BD
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ models/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Transaction.js      # Modelo de transacciones
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Category.js         # Modelo de categor√≠as
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ scripts/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ migrate.js          # Migraciones de BD
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ seed.js             # Datos iniciales
‚îÇ   ‚îú‚îÄ‚îÄ index.js                # Servidor principal
‚îÇ   ‚îú‚îÄ‚îÄ .env                    # Variables de entorno
‚îÇ   ‚îú‚îÄ‚îÄ .env.example           # Plantilla de configuraci√≥n
‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ package.json                # Scripts principales
‚îî‚îÄ‚îÄ README.md                   # Esta documentaci√≥n
```

## üîß Configuraci√≥n

### Variables de Entorno

Edita el archivo `server/.env` con tu configuraci√≥n:

```env
# Configuraci√≥n del servidor
PORT=5000
NODE_ENV=development

# Base de datos (sqlite por defecto)
DATABASE_TYPE=sqlite
SQLITE_DB_PATH=./database.sqlite

# Para PostgreSQL (opcional)
# DATABASE_TYPE=postgresql
# POSTGRES_HOST=localhost
# POSTGRES_PORT=5432
# POSTGRES_DB=expense_tracker
# POSTGRES_USER=tu_usuario
# POSTGRES_PASSWORD=tu_contrase√±a
# POSTGRES_SSL=false

# Seguridad
JWT_SECRET=tu-clave-secreta-super-segura
BCRYPT_ROUNDS=12

# Rate limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
```

### Configuraci√≥n de PostgreSQL

Para usar PostgreSQL en lugar de SQLite:

1. **Instalar PostgreSQL** en tu sistema
2. **Crear base de datos**:
   ```sql
   CREATE DATABASE expense_tracker;
   CREATE USER expense_user WITH PASSWORD 'tu_password';
   GRANT ALL PRIVILEGES ON DATABASE expense_tracker TO expense_user;
   ```
3. **Configurar variables de entorno** en `server/.env`
4. **Ejecutar migraciones**: `npm run migrate`

## üìö Scripts Disponibles

### Scripts Principales
```bash
# Desarrollo (frontend + backend)
npm run dev

# Instalar todas las dependencias
npm run install-all

# Construir para producci√≥n
npm run build-all

# Ejecutar en producci√≥n
npm start
```

### Scripts del Backend
```bash
cd server

# Desarrollo con auto-reload
npm run dev

# Producci√≥n
npm start

# Migraciones de base de datos
npm run migrate

# Seeders (datos iniciales)
npm run seed

# Setup completo (migraciones + seeders)
npm run setup

# Linting y formato
npm run lint
npm run format

# Tests
npm test
```

### Scripts del Frontend
```bash
cd client

# Desarrollo
npm start

# Construcci√≥n para producci√≥n
npm run build

# Tests
npm test
```

## üóÑÔ∏è Base de Datos

### Modelos de Datos

#### Transacciones
```sql
CREATE TABLE transactions (
  id SERIAL PRIMARY KEY,
  type VARCHAR(10) NOT NULL CHECK(type IN ('income', 'expense')),
  amount DECIMAL(12,2) NOT NULL CHECK(amount > 0),
  description VARCHAR(255) NOT NULL,
  category VARCHAR(100) NOT NULL,
  date DATE NOT NULL,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);
```

#### Categor√≠as
```sql
CREATE TABLE categories (
  id SERIAL PRIMARY KEY,
  name VARCHAR(100) NOT NULL UNIQUE,
  type VARCHAR(10) NOT NULL CHECK(type IN ('income', 'expense')),
  description TEXT,
  color VARCHAR(7),
  icon VARCHAR(50),
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);
```

### Comandos de Base de Datos

```bash
# Verificar estado de migraciones
node scripts/migrate.js status

# Ejecutar migraciones
node scripts/migrate.js run

# Limpiar datos y recrear
node scripts/seed.js --fresh --samples

# Solo categor√≠as por defecto
node scripts/seed.js

# Con datos de ejemplo
node scripts/seed.js --samples
```

## üåê API Endpoints

### Transacciones
- `GET /api/transactions` - Listar transacciones (con filtros)
- `GET /api/transactions/:id` - Obtener transacci√≥n espec√≠fica
- `POST /api/transactions` - Crear nueva transacci√≥n
- `PUT /api/transactions/:id` - Actualizar transacci√≥n
- `DELETE /api/transactions/:id` - Eliminar transacci√≥n

### Categor√≠as
- `GET /api/categories` - Listar categor√≠as
- `GET /api/categories/:id` - Obtener categor√≠a espec√≠fica
- `GET /api/categories/stats` - Categor√≠as con estad√≠sticas de uso
- `POST /api/categories` - Crear nueva categor√≠a
- `PUT /api/categories/:id` - Actualizar categor√≠a
- `DELETE /api/categories/:id` - Eliminar categor√≠a

### Reportes y Estad√≠sticas
- `GET /api/summary` - Resumen financiero general
- `GET /api/reports/monthly/:year` - Datos mensuales por a√±o
- `GET /api/health` - Estado del servidor

### Ejemplos de Uso

```bash
# Obtener todas las transacciones de gastos
curl "http://localhost:5000/api/transactions?type=expense"

# Crear nueva transacci√≥n
curl -X POST http://localhost:5000/api/transactions \
  -H "Content-Type: application/json" \
  -d '{
    "type": "expense",
    "amount": 50.00,
    "description": "Compra supermercado",
    "category": "Alimentaci√≥n",
    "date": "2024-01-15"
  }'

# Obtener resumen financiero
curl "http://localhost:5000/api/summary"
```

## üé® Interfaz de Usuario

### Caracter√≠sticas del Frontend
- **Dashboard Intuitivo**: Resumen visual con tarjetas de estad√≠sticas
- **Formularios Inteligentes**: Validaci√≥n en tiempo real
- **Filtros Avanzados**: B√∫squeda por m√∫ltiples criterios
- **Gr√°ficos Interactivos**: Visualizaciones con Chart.js
- **Dise√±o Responsivo**: Adaptable a m√≥viles y tablets

### Navegaci√≥n
1. **Resumen**: Dashboard principal con estad√≠sticas
2. **Agregar Transacci√≥n**: Formulario de nueva transacci√≥n
3. **Historial**: Lista completa con filtros y paginaci√≥n
4. **Gr√°ficos**: An√°lisis visual y recomendaciones

## üöÄ Despliegue

### Desarrollo Local
```bash
# Clonar repositorio
git clone <tu-repositorio>
cd summary-of-expenses

# Instalar y configurar
npm run install-all
cp server/.env.example server/.env

# Inicializar base de datos
cd server && npm run setup

# Ejecutar en desarrollo
npm run dev
```

### Producci√≥n

#### Opci√≥n 1: Servidor Tradicional
```bash
# Construir aplicaci√≥n
npm run build-all

# Configurar variables de entorno para producci√≥n
export NODE_ENV=production
export PORT=80

# Ejecutar
npm start
```

#### Opci√≥n 2: Docker (Pr√≥ximamente)
```bash
# Construir imagen
docker build -t expense-tracker .

# Ejecutar contenedor
docker run -p 3000:3000 expense-tracker
```

### Variables de Entorno para Producci√≥n
```env
NODE_ENV=production
PORT=80
DATABASE_TYPE=postgresql
POSTGRES_HOST=tu-host-db
POSTGRES_DB=expense_tracker_prod
POSTGRES_USER=usuario_prod
POSTGRES_PASSWORD=password_seguro
JWT_SECRET=clave-super-secreta-de-produccion
```

## üõ†Ô∏è Desarrollo

### Agregar Nueva Funcionalidad

1. **Backend**: Crear endpoint en `server/index.js`
2. **Modelo**: Actualizar modelos en `server/models/`
3. **Frontend**: Crear componente en `client/src/components/`
4. **Estilos**: Actualizar `client/src/index.css`

### Estructura de Componentes React
```javascript
// Ejemplo de componente
import React, { useState, useEffect } from 'react';
import axios from 'axios';

const MiComponente = ({ prop1, prop2 }) => {
  const [estado, setEstado] = useState(null);
  
  useEffect(() => {
    // L√≥gica de efecto
  }, []);
  
  return (
    <div className="card">
      {/* JSX del componente */}
    </div>
  );
};

export default MiComponente;
```

### Validaci√≥n de Datos
```javascript
// Usando Joi en el backend
const schema = Joi.object({
  amount: Joi.number().positive().required(),
  description: Joi.string().min(1).max(255).required(),
  // ... m√°s validaciones
});

const { error, value } = schema.validate(data);
```

## üîí Seguridad

### Medidas Implementadas
- **Helmet**: Headers de seguridad HTTP
- **Rate Limiting**: Protecci√≥n contra ataques de fuerza bruta
- **Validaci√≥n de Datos**: Joi para validaci√≥n robusta
- **CORS Configurado**: Or√≠genes permitidos espec√≠ficos
- **Sanitizaci√≥n**: Prevenci√≥n de inyecci√≥n SQL

### Recomendaciones Adicionales
- Usar HTTPS en producci√≥n
- Configurar firewall apropiado
- Mantener dependencias actualizadas
- Implementar backups regulares
- Monitorear logs de seguridad

## üêõ Soluci√≥n de Problemas

### Problemas Comunes

#### Error de Conexi√≥n a Base de Datos
```bash
# Verificar configuraci√≥n
cat server/.env

# Probar conexi√≥n
node -e "require('./server/config/database').connect().then(() => console.log('OK'))"
```

#### Puerto en Uso
```bash
# Encontrar proceso usando puerto 5000
lsof -i :5000

# Cambiar puerto en .env
echo "PORT=5001" >> server/.env
```

#### Dependencias Faltantes
```bash
# Reinstalar todas las dependencias
rm -rf node_modules client/node_modules server/node_modules
npm run install-all
```

### Logs y Debugging
```bash
# Ver logs del servidor
tail -f server/logs/app.log

# Modo debug
DEBUG=* npm run dev
```

## üìà Roadmap

### Pr√≥ximas Funcionalidades
- [ ] üê≥ Soporte Docker completo
- [ ] üìä Exportaci√≥n de datos (CSV, PDF)
- [ ] üîî Notificaciones y alertas
- [ ] üë• Sistema de usuarios m√∫ltiples
- [ ] üì± App m√≥vil (React Native)
- [ ] ü§ñ Categorizaci√≥n autom√°tica con IA
- [ ] üí≥ Integraci√≥n con bancos
- [ ] üìÖ Presupuestos y metas

### Mejoras T√©cnicas
- [ ] Tests automatizados (Jest, Cypress)
- [ ] CI/CD con GitHub Actions
- [ ] Monitoreo con Prometheus
- [ ] Cache con Redis
- [ ] WebSockets para actualizaciones en tiempo real

## ü§ù Contribuir

### C√≥mo Contribuir
1. Fork del repositorio
2. Crear rama feature (`git checkout -b feature/nueva-funcionalidad`)
3. Commit cambios (`git commit -am 'Agregar nueva funcionalidad'`)
4. Push a la rama (`git push origin feature/nueva-funcionalidad`)
5. Crear Pull Request

### Est√°ndares de C√≥digo
- Usar ESLint y Prettier
- Documentar funciones complejas
- Escribir tests para nuevas funcionalidades
- Seguir convenciones de nomenclatura

## üìÑ Licencia

Este proyecto est√° bajo la Licencia MIT. Ver archivo `LICENSE` para m√°s detalles.

## üôã‚Äç‚ôÇÔ∏è Soporte

### Documentaci√≥n Adicional
- [Gu√≠a de API](docs/api.md)
- [Gu√≠a de Desarrollo](docs/development.md)
- [FAQ](docs/faq.md)

### Contacto
- üìß Email: soporte@expense-tracker.com
- üêõ Issues: [GitHub Issues](https://github.com/tu-usuario/expense-tracker/issues)
- üí¨ Discusiones: [GitHub Discussions](https://github.com/tu-usuario/expense-tracker/discussions)

---

**¬°Gracias por usar el Sistema de Control de Gastos del Hogar!** üè†üí∞

*Desarrollado con ‚ù§Ô∏è para ayudarte a tener un mejor control de tus finanzas personales.*
